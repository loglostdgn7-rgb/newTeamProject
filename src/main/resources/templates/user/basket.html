<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/main-layout}"
>


<th:block layout:fragment="css">
    <link rel="stylesheet" th:href="@{/css/user/basket.css}">
</th:block>
<th:block layout:fragment="js">
    <script src="https://cdn.iamport.kr/v1/iamport.js"></script>
    <script th:src="@{/js/user/basket.js}" defer></script>
</th:block>


<main layout:fragment="content">
    <section class="basket-section ">
        <div class="basket-title-container">
            <h1>Basket</h1>
            <span class="product-sort">(5)</span>
        </div>

        <div class="basket-layout-container">
            <div class="basket-container">
                <ul class="product-list-container">
                    <li class="no-product">
                        <span>장바구니가 비어 있습니다.</span>
                        <a href="/shop/product/list">전 상품 보러가기</a>
                    </li>
                    <li th:each="item : ${list}" class="product" th:data-product-id="${item.product.getProductId()}">
                        <a class="product-img-box" href="#">
                            <img src="https://standoil.cafe24.com/web/product/tiny/202406/8f0c8d46ff44a36493fd240c1f06deba.jpg"
                                 alt="">
                        </a>
                        <div class="product-text-box">
                            <a class="name-color-price" href="#">
                                <span th:text="${item.product.name}" class="product-name">Hippo Bag · 히포백 / 실버</span>
                                <span th:text="|￦${#numbers.formatInteger(item.product.price * item.quantity, 0, 'COMMA')}|">￦71,000</span>
                            </a>
                            <span class="plus-minus-case">
                                <i class="bi bi-dash"></i>
                                <span class="product-quantity" th:text="${item.getQuantity}">1</span>
                                <i class="bi bi-plus"></i>
                            </span>
                        </div>
                        <div class="product-remove-box">
                            <a th:href="@{/user/basket/delete/{productId}(productId=${item.product.productId})}">remove</a>
                        </div>
                    </li>

                </ul>
            </div>
            <div class="basket-total-container">
                <h1>SHOPPING SUMMARY</h1>
                <div class="txt-box">
                    <span class="txt">상품 총액</span>
                    <span class="product-total-price" th:text="${productTotalPrice}">171000</span>
                </div>
                <div class="txt-box">
                    <span class="txt">배송비</span>
                    <span class="shipping-price" th:text="${shippingPrice}">0</span>
                </div>
                <div class="txt-box">
                    <span class="txt">총 주문액</span>
                    <span class="order-total" th:text="${orderTotalPrice}">171000</span>
                </div>
                <button class="check-out">CHECK OUT</button>
            </div>
        </div>
    </section>



<!-- ********************** 결제 모달창 ***********************-->
    <section class="payment-background">
        <div class="payment-container" >
            <form>
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">

                <h1>주문서 배송지 정보</h1>
                <div class="payment-alert">
                    이 창은 보여주기 위한 것으로 실제 결제가 되지 않으며,<br>결제 버튼을 누를 시 결제 완료를 전제로 실행됩니다
                </div>
                <label>
                    <span>받으시는 분</span>
                    <input type="text" class="real-name" name="real-name" th:value="${user} ? ${user.realName} : ''">
                </label>
                <label class="payment-address-box">
                    <span>주소</span>
                    <label>
                        <input type="text" class="postcode" name="postcode" th:value="${user} ? ${user.postcode} : ''" placeholder="우편번호">
                        <input type="text" class="road-address" name="road-address" th:value="${user} ? ${user.roadAddress} : ''" placeholder="주소">
                        <input type="text" class="detail-address" name="detail-address" th:value="${user} ? ${user.detailAddress} : ''" placeholder="상세주소">
                    </label>
                </label>
                <label class="payment-tel-box">
                    <span>휴대전화</span>
                    <label>
                        <select name="tel-prev" class="payment-tel-prev">
                            <option value="010" th:selected="${user != null && user.telPrev == '010'}">010</option>
                            <option value="011" th:selected="${user != null && user.telPrev == '011'}">011</option>
                            <option value="016" th:selected="${user != null && user.telPrev == '016'}">016</option>
                            <option value="017" th:selected="${user != null && user.telPrev == '017'}">017</option>
                            <option value="018" th:selected="${user != null && user.telPrev == '018'}">018</option>
                            <option value="019" th:selected="${user != null && user.telPrev == '019'}">019</option>
                        </select>
                        -
                        <input type="tel" name="tel-body" class="payment-tel-body" th:value="${user} ? ${user.telBody} : ''"
                               maxlength="4">
                        -
                        <input type="tel" name="tel-tail" class="payment-tel-tail" th:value="${user} ? ${user.telTail} : ''"
                               maxlength="4">
                    </label>
                </label>
                <label>
                    <span>이메일</span>
                    <input type="text" class="email" name="email" th:value="${user} ? ${user.email} : ''">
                </label>
                <label>
                    <span>배송시 요청사항</span>
                    <input type="text" class="request" name="request" placeholder="">
                </label>

                <h1>결제 방식</h1>
                <label class="price">
                    <span>결제 금액</span>
                    <input name="price" class="order-total-price" th:value="${orderTotalPrice}" readonly>
                </label>
                <section>
                    <span>결제</span>
                    <div class="pay-box-container">
                        <label class="pay-box">
                            <label>
<!--                                인풋의 value는 포트원 kg 이니시스에 맞춰야해서 이상해도 어쩔 수 없음-->
                                <input type="radio" name="payment-method" value="phone">
                                <span>휴대폰 결제</span>
                            </label>
                            <label>
                                <input type="radio" name="payment-method" value="" disabled>
                                <span>무통장 입금</span>
                            </label>
                        </label>
                        <label class="pay-box">
                            <label>
                                <input type="radio" name="payment-method" value="kakaopay">
                                <span>카카오페이(간편결제)</span>
                            </label>
                            <label>
                                <input type="radio" name="payment-method" value="card">
                                <span>카드 결제</span>
                            </label>
                        </label>
                        <label class="pay-box">
                            <label>
                                <input type="radio" name="payment-method" value="trans">
                                <span>실시간 계좌이체</span>
                            </label>
                            <label>
                                <input type="radio" name="payment-method" value="vbank">
                                <span>가상 계좌</span>
                            </label>
                        </label>
                    </div>
                </section>
                <button class="payment-button" type="button">결제하기</button>
            </form>
        </div>
    </section>
</main>
<footer th:replace="~{layout/fragments/footer :: footer}"></footer>
</html>
